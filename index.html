<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Shop</title>
    <link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>
    <div class="container">
        <div class="calendar">
            <div class="header">
                <div class="month">July 2021</div>
                <div class="btns">
                    <!-- today -->
                    <div class="btn today">
                        <i class="fas fa-calendar-day"></i>
                    </div>
                    <!-- previous month -->
                    <div class="btn prev">
                        <i class="fas fa-chevron-left"></i>
                    </div>
                    <!-- next month -->
                    <div class="btn next">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
            </div>
            <div class="weekdays">
                <div class="day">Пн</div>
                <div class="day">Вт</div>
                <div class="day">Ср</div>
                <div class="day">Чт</div>
                <div class="day">Пт</div>
                <div class="day">Сб</div>
                <div class="day">Вс</div>
            </div>
            <div class="days">
                <!-- render days with js -->
            </div>
        </div>
    </div>



    <!--        <div id="main">-->
    <!--            <h1>0нлайн магазин</h1>-->
    <!--            <img src=" https://cdn-icons-png.flaticon.com/512/3595/3595455.png ">-->
    <!--            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium ipsum magni, molestias.</p>-->
    <!--            <button id="buy">Купить</button>-->
    <!--        </div>-->
    <!--        -->
    <!--        -->
    <!--        <form id="form">-->
    <!--            <input type="text" placeholder="Имя" id="user_name">-->
    <!--            <input type="text" placeholder="Email" id="user_email">-->
    <!--            <input type="text" placeholder="Телефон" id="user_phone">-->
    <!--            <div id="error">-->
    <!--            </div>-->
    <!--            <button id="order">Оформить</button>-->
    <!--        </form>-->

    </div>

    <!-- Telegram-->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script type="module" src="script.js"></script>



    <script>
        let tg = window.Telegram.WebApp;
        let buy = document.getElementById("buy");
        let order = document.getElementById("order");



        buy.addEventListener("click", () => {
            document.getElementById("error").innerText = '';
            document.getElementById("main").style.display = "none";
            document.getElementById("form").style.display = "block";
            document.getElementById("user_name").value = tg.initDataUnsafe.user.first_name + " " + tg.initDataUnsafe.user.last_name;
        })

        order.addEventListener('click', function(event) {
            event.preventDefault(); // Отменяем стандартное действие кнопки
            let name = document.getElementById("user_name").value;
            let email = document.getElementById("user_email").value;
            let phone = document.getElementById("user_phone").value;

            let data = {
                name: name,
                email: email,
                phone: phone
            }
            console.log("data: ", data)
            tg.sendData(JSON.stringify(data));
            tg.close();

        });
    </script>
</body>

</html>
